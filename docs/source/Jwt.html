<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Miraeweb-utils-Jwt'>/**
</span> *
 */
Ext.define('Miraeweb.utils.Jwt', {
    alternateClassName: ['Miraeweb.Jwt'],
    extend: 'Ext.Base',

    requires: [
        'Ext.util.Base64',
        'Ext.util.Cookies'
    ],
    singleton: true,
<span id='Miraeweb-utils-Jwt-property-userData'>    userData : null,
</span>
<span id='Miraeweb-utils-Jwt-method-getAccessToken'>    /**
</span>     *  AccessToken 을 가져옵니다.
     *
     * @returns {String} AccessToken
     */
    getAccessToken : function(){

        var accessToken =Ext.util.Cookies.get(this.cookieName.accessToken);
        if(!accessToken){
            return this.refreshAccessToken();
        }
        return accessToken;


    },
<span id='Miraeweb-utils-Jwt-method-removeCookie'>    /**
</span>     *  AccessToken을 삭제합니다.
     */
    removeCookie: function () {
        Ext.util.Cookies.clear(this.cookieName.accessToken);
    },

<span id='Miraeweb-utils-Jwt-method-parseUserData'>    /**
</span>     *  JWT의 Payload를 가져옵니다.
     * @param accessToken {string}
     * @returns {*}
     */
    parseUserData : function(accessToken){
        //JWT 표준 규약상 Padding이 없는 형태로 들어와야함.
        var noPadBase64 = accessToken.split('.')[1];

        var addPad = '';
        var dataCount = noPadBase64.length % 4;

        //Padding 처리;
        if (dataCount == 2) {
            addPad = '==';

        } else if (dataCount == 3) {
            addPad = '=';
        }

        var base64Data = noPadBase64 + addPad;
        var decodeData = Ext.util.Base64.decode(base64Data);
        return Ext.decode(decodeData);
    },

});</pre>
</body>
</html>
